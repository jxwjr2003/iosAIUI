<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy"
        content="default-src 'self'; script-src 'self'; style-src 'self'; img-src 'self' data:; connect-src 'self' https://api.openai.com https://api.deepseek.com;">
    <title>iOS UI Editor</title>
    <link rel="stylesheet" href="src/styles/main.css">
    <link rel="stylesheet" href="src/styles/property-editor.css">
    <link rel="stylesheet" href="src/styles/file-browser.css">
</head>

<body>
    <div class="app-container">
        <!-- È°∂ÈÉ®Â∑•ÂÖ∑Ê†è -->
        <header class="app-header">
            <div class="header-left">
                <h1 class="app-title">iOS UI Editor</h1>
            </div>
            <div class="header-center">
                <button id="save-as-btn" class="toolbar-btn">Âè¶Â≠ò‰∏∫</button>
                <button id="view-json-btn" class="toolbar-btn">Êü•ÁúãJSONÂÜÖÂÆπ</button>
                <button id="new-root-btn" class="toolbar-btn">Êñ∞Âª∫Ê†πËäÇÁÇπ</button>
            </div>
            <div class="header-right">
                <button id="settings-btn" class="toolbar-btn">ËÆæÁΩÆ</button>
            </div>
        </header>

        <!-- ‰∏ªÂÜÖÂÆπÂå∫Âüü -->
        <main class="main-content">
            <!-- Â∑¶‰æßÔºöÊ†ëÂΩ¢ÁºñËæëÂô® (35%) -->
            <section class="panel tree-editor-panel">
                <div class="panel-header">
                    <h2>UI Â±ÇÁ∫ßÊ†ë</h2>
                    <div class="panel-actions">
                        <button id="expand-all-btn" class="icon-btn" title="Â±ïÂºÄÂÖ®ÈÉ®">üìÇ</button>
                        <button id="collapse-all-btn" class="icon-btn" title="Êî∂Ëµ∑ÂÖ®ÈÉ®">üìÅ</button>
                        <button id="search-tree-btn" class="icon-btn" title="ÊêúÁ¥¢">üîç</button>
                    </div>
                </div>
                <div class="panel-content">
                    <div id="tree-container" class="tree-container">
                        <!-- Ê†ëÂΩ¢ÁªìÊûÑÂ∞ÜÂú®ËøôÈáåÂä®ÊÄÅÁîüÊàê -->
                    </div>
                </div>
            </section>

            <!-- ‰∏≠Èó¥ÔºöiOS Ê®°ÊãüÂô® (30%) -->
            <section class="panel simulator-panel">
                <div class="panel-header">
                    <h2>iOS Ê®°ÊãüÂô®</h2>
                    <div class="panel-actions">
                        <select id="device-selector" class="device-selector">
                            <option value="iphone16">iPhone 16</option>
                            <option value="iphone16plus">iPhone 16 Plus</option>
                            <option value="iphone16pro">iPhone 16 Pro</option>
                            <option value="iphone16promax" selected>iPhone 16 Pro Max</option>
                            <option value="iphone15">iPhone 15</option>
                            <option value="iphone15pro">iPhone 15 Pro</option>
                            <option value="iphone14">iPhone 14</option>
                            <option value="custom">Ëá™ÂÆö‰πâ</option>
                        </select>
                        <div id="resolution-display" class="resolution-display">
                            <span class="resolution-text">393√ó852 pt (1179√ó2556 px)</span>
                        </div>
                        <button id="refresh-simulator-btn" class="icon-btn" title="Âà∑Êñ∞È¢ÑËßà">üîÑ</button>
                        <button id="zoom-out-btn" class="icon-btn" title="Áº©Â∞è">‚ûñ</button>
                        <button id="zoom-in-btn" class="icon-btn" title="ÊîæÂ§ß">‚ûï</button>
                        <button id="reset-view-btn" class="icon-btn" title="ÈáçÁΩÆËßÜÂõæ">üóò</button>
                    </div>
                </div>
                <div class="panel-content">
                    <div id="simulator-container" class="simulator-container">
                        <div id="simulator-device" class="simulator-device">
                            <div id="simulator-screen" class="simulator-screen">
                                <div id="simulator-content" class="simulator-content">
                                    <!-- Ê®°ÊãüÂô®ÂÜÖÂÆπÂ∞ÜÂú®ËøôÈáåÂä®ÊÄÅÊ∏≤Êüì -->
                                    <div class="simulator-placeholder">
                                        <p>ÈÄâÊã©Ê†πËäÇÁÇπÂºÄÂßãÈ¢ÑËßà</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Âè≥‰æßÔºöÂ±ûÊÄßÁºñËæëÂô® (35%) -->
            <section class="panel property-editor-panel">
                <div class="panel-header">
                    <h2>Â±ûÊÄßÁºñËæëÂô®</h2>
                    <div class="panel-actions">
                        <button id="save-properties-btn" class="icon-btn" title="‰øùÂ≠òÂ±ûÊÄß">üíæ</button>
                        <button id="reset-properties-btn" class="icon-btn" title="ÈáçÁΩÆÂ±ûÊÄß">‚Ü∫</button>
                    </div>
                </div>
                <div class="panel-content">
                    <div id="property-editor" class="property-editor">
                        <div class="property-section">
                            <h3>Âü∫Á°Ä‰ø°ÊÅØ</h3>
                            <div class="property-group">
                                <label for="node-id">ËäÇÁÇπID:</label>
                                <input type="text" id="node-id" readonly>
                            </div>
                            <div class="property-group">
                                <label for="node-name">ËäÇÁÇπÂêçÁß∞:</label>
                                <input type="text" id="node-name">
                            </div>
                            <div class="property-group">
                                <label for="node-type">ËäÇÁÇπÁ±ªÂûã:</label>
                                <select id="node-type">
                                    <!-- ËäÇÁÇπÁ±ªÂûãÈÄâÈ°πÂ∞ÜÂä®ÊÄÅÁîüÊàê -->
                                </select>
                            </div>
                            <div class="property-group">
                                <label for="node-reference-type">ÂºïÁî®Á±ªÂûã:</label>
                                <input type="text" id="node-reference-type">
                            </div>
                        </div>

                        <div class="property-section">
                            <h3>Attributes Â±ûÊÄß</h3>
                            <div id="attributes-container" class="attributes-container">
                                <!-- Â±ûÊÄßÁºñËæëÂô®Â∞ÜÂú®ËøôÈáåÂä®ÊÄÅÁîüÊàê -->
                            </div>
                            <button id="add-attribute-btn" class="add-btn">+ Ê∑ªÂä†Â±ûÊÄß</button>
                        </div>

                        <div class="property-section">
                            <h3>Á∫¶ÊùüÂåÖ</h3>
                            <div id="constraints-container" class="constraints-container">
                                <!-- Á∫¶ÊùüÂåÖÁºñËæëÂô®Â∞ÜÂú®ËøôÈáåÂä®ÊÄÅÁîüÊàê -->
                            </div>
                            <button id="add-constraint-package-btn" class="add-btn">+ Ê∑ªÂä†Á∫¶ÊùüÂåÖ</button>
                        </div>

                        <div class="property-section">
                            <h3>ÊàêÂëòÂèòÈáè</h3>
                            <div id="member-variables-container" class="member-variables-container">
                                <!-- ÊàêÂëòÂèòÈáèÁºñËæëÂô®Â∞ÜÂú®ËøôÈáåÂä®ÊÄÅÁîüÊàê -->
                            </div>
                            <button id="add-member-variable-btn" class="add-btn">+ Ê∑ªÂä†ÊàêÂëòÂèòÈáè</button>
                        </div>

                        <div class="property-section">
                            <h3>ÂáΩÊï∞</h3>
                            <div id="functions-container" class="functions-container">
                                <!-- ÂáΩÊï∞ÁºñËæëÂô®Â∞ÜÂú®ËøôÈáåÂä®ÊÄÅÁîüÊàê -->
                            </div>
                            <button id="add-function-btn" class="add-btn">+ Ê∑ªÂä†ÂáΩÊï∞</button>
                        </div>

                        <div class="property-section">
                            <h3>ÂçèËÆÆ</h3>
                            <div id="protocols-container" class="protocols-container">
                                <!-- ÂçèËÆÆÁºñËæëÂô®Â∞ÜÂú®ËøôÈáåÂä®ÊÄÅÁîüÊàê -->
                            </div>
                            <button id="add-protocol-btn" class="add-btn">+ Ê∑ªÂä†ÂçèËÆÆ</button>
                        </div>

                        <div class="property-section">
                            <h3>Â∏ÉÂ±Ä</h3>
                            <div class="property-group">
                                <label for="layout-direction">Â≠êËäÇÁÇπÂ∏ÉÂ±Ä:</label>
                                <select id="layout-direction">
                                    <option value="horizontal">Ê∞¥Âπ≥</option>
                                    <option value="vertical">ÂûÇÁõ¥</option>
                                </select>
                            </div>
                        </div>

                        <div class="property-section">
                            <h3>Â§áÊ≥®</h3>
                            <div class="property-group">
                                <textarea id="node-description" placeholder="ËæìÂÖ•ËäÇÁÇπËØ¥Êòé..."></textarea>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <!-- Â∫ïÈÉ®ÔºöÊñá‰ª∂ÊµèËßàÂô® (20%) -->
        <footer class="file-browser-panel">
            <div class="panel-header">
                <h2>Êñá‰ª∂ÊµèËßàÂô®</h2>
                <div class="panel-actions">
                    <button id="select-folder-btn" class="toolbar-btn">ÈÄâÊã©Êñá‰ª∂Â§π</button>
                    <button id="refresh-files-btn" class="icon-btn" title="Âà∑Êñ∞Êñá‰ª∂ÂàóË°®">üîÑ</button>
                    <div id="file-status" class="file-status file-status-saved">
                        <span class="status-text">Êñá‰ª∂Â∑≤‰øùÂ≠ò</span>
                    </div>
                </div>
            </div>
            <div class="panel-content">
                <div class="file-browser-container">
                    <!-- Ë∑ØÂæÑÂØºËà™Èù¢ÂåÖÂ±ë -->
                    <div id="path-breadcrumb" class="path-breadcrumb">
                        <span class="breadcrumb-item">ËØ∑ÈÄâÊã©Êñá‰ª∂Â§π</span>
                    </div>

                    <!-- Êñá‰ª∂Â§πÂíåÊñá‰ª∂ÂàóË°® -->
                    <div class="file-tree-container">
                        <div id="file-tree" class="file-tree">
                            <!-- Êñá‰ª∂Â§πÂíåÊñá‰ª∂Â∞ÜÂú®ËøôÈáåÂä®ÊÄÅÁîüÊàê -->
                            <div class="file-tree-empty">
                                <p>ËØ∑ÈÄâÊã©ÊñáÊ°£Êñá‰ª∂Â§πÂºÄÂßãÊµèËßà</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </footer>

    </div>



    <!-- JSON Êü•ÁúãÂô®ÂØπËØùÊ°Ü -->
    <div id="json-viewer-dialog" class="modal-dialog hidden">
        <div class="dialog-content json-viewer-dialog">
            <h3>UI Â±ÇÁ∫ßÊ†ë JSON ÂÜÖÂÆπ</h3>
            <div class="json-viewer-actions">
                <button id="copy-json-btn" class="btn-secondary">Â§çÂà∂Âà∞Ââ™Ë¥¥Êùø</button>
                <button id="refresh-json-btn" class="btn-secondary">Âà∑Êñ∞</button>
            </div>
            <div id="json-content" class="json-content">
                <!-- JSON ÂÜÖÂÆπÂ∞ÜÂú®ËøôÈáåÊòæÁ§∫ -->
            </div>
            <div class="dialog-actions">
                <button id="close-json-btn" class="btn-primary">ÂÖ≥Èó≠</button>
            </div>
        </div>
    </div>

    <script src="src/utils/stateManager.js"></script>
    <script src="src/utils/nodeIdGenerator.js"></script>
    <script src="src/utils/dataValidator.js"></script>
    <script src="src/utils/constraintLayoutEngine.js"></script>
    <script src="src/utils/DynamicNodeTypeManager.js"></script>
    <script src="src/utils/VirtualNodeProcessor.js"></script>
    <script src="src/config/componentAttributes.js"></script>
    <script src="src/managers/AttributeManager.js"></script>
    <script src="src/managers/ConstraintManager.js"></script>
    <script src="src/managers/MemberVariableManager.js"></script>
    <script src="src/managers/FunctionManager.js"></script>
    <script src="src/managers/ProtocolManager.js"></script>

    <!-- Ê®°ÊãüÂô®Ê®°ÂùóÂåñÁªÑ‰ª∂ -->
    <script src="src/components/DeviceManager.js"></script>
    <script src="src/components/NodeRenderer.js"></script>
    <script src="src/components/StyleApplicator.js"></script>
    <script src="src/components/ConstraintApplier.js"></script>

    <script src="src/components/treeEditor.js"></script>
    <script src="src/components/simulator.js"></script>
    <script src="src/components/propertyEditor.js"></script>
    <script src="src/components/jsonViewer.js"></script>
    <script src="src/components/FileBrowser.js"></script>
    <script src="src/services/dataService.js"></script>
    <script src="src/app.js"></script>
</body>

</html>