## ADDED Requirements
### Requirement: iOS 模拟器预览
系统 SHALL 提供一个 iOS 风格的模拟器，能够实时预览选中的 UI 根节点及其层级结构，并支持常见 iPhone 设备尺寸选择。

#### Scenario: 选择根节点预览
- **WHEN** 用户在树形编辑器中选择一个根节点
- **THEN** 模拟器区域显示该根节点的完整 UI 层级结构
- **AND** 根节点宽度默认与模拟器内容区域宽度一致
- **AND** 如果根节点约束包未提供高度约束，则使用整个屏幕高度
- **AND** 模拟器根据节点的约束关系进行布局渲染

#### Scenario: 设备尺寸选择
- **WHEN** 用户打开模拟器
- **THEN** 模拟器顶部显示设备选择下拉菜单
- **AND** 设备选择菜单包含常见 iPhone 设备预设：
  - iPhone 14 Pro Max (430x932)
  - iPhone 15 (393x852)
  - iPhone 15 Pro (393x852)
  - iPhone SE (375x667)
  - iPhone 13 (390x844)
  - 自定义尺寸
- **AND** 用户可以选择预设设备或输入自定义宽度和高度

#### Scenario: 设备切换实时更新
- **WHEN** 用户选择不同的设备预设
- **THEN** 模拟器视图立即调整为所选设备的尺寸
- **AND** 模拟器顶部显示当前设备名称和尺寸信息
- **AND** UI 组件根据新的设备尺寸重新计算布局

#### Scenario: 自定义设备尺寸
- **WHEN** 用户选择"自定义尺寸"选项
- **THEN** 系统显示宽度和高度输入框
- **AND** 用户可以输入自定义的设备尺寸
- **AND** 尺寸输入支持数值验证，确保合理的设备尺寸范围
- **AND** 自定义尺寸立即应用到模拟器视图

#### Scenario: 手动刷新机制
- **WHEN** 用户点击模拟器区域的"刷新模拟器"按钮
- **THEN** 模拟器根据当前选中的根节点重新渲染完整 UI 层级结构
- **AND** 确保布局约束关系的正确性

#### Scenario: 子节点修改溯源展示
- **WHEN** 用户在属性编辑器中修改非根节点（子节点）的属性
- **THEN** 模拟器自动向上溯源找到包含该子节点的根节点
- **AND** 在模拟器中展示该溯源到的根节点的完整 UI 层级
- **AND** 实时更新对应 UI 元素显示

#### Scenario: 实时更新预览
- **WHEN** 用户在属性编辑器中修改任何节点属性
- **THEN** 模拟器在100ms内响应并更新对应的 UI 元素显示
- **AND** 保持布局约束关系的正确性
- **AND** 提供视觉反馈（如高亮变化的元素）

#### Scenario: 约束布局渲染
- **WHEN** 节点包含约束包定义
- **THEN** 模拟器根据默认约束包中的约束关系计算元素位置和尺寸
- **AND** 正确应用尺寸约束、边界约束、中心约束、基线约束和宽高比约束
- **AND** 支持约束包切换时的实时布局更新

#### Scenario: 文本基线对齐渲染
- **WHEN** 节点包含baseline约束
- **THEN** 模拟器正确渲染文本组件的基线对齐效果
- **AND** 确保不同字体大小的文本组件能够正确对齐

#### Scenario: 宽高比约束渲染
- **WHEN** 节点包含aspectRatio约束
- **THEN** 模拟器正确渲染组件的宽高比例约束
- **AND** 在组件尺寸变化时保持设定的宽高比例

#### Scenario: 样式属性应用
- **WHEN** 节点包含样式属性（颜色、字体、背景等）
- **THEN** 模拟器正确应用所有样式属性到对应的 UI 元素
- **AND** 保持 iOS 风格的外观和交互效果

#### Scenario: 直接模拟器交互
- **WHEN** 用户点击模拟器中的组件
- **THEN** 自动选中对应的树形节点
- **AND** 属性编辑器显示选中节点的属性信息

#### Scenario: 悬停预览信息
- **WHEN** 用户鼠标悬停在模拟器中的组件上
- **THEN** 显示组件的基本信息（类型、ID、尺寸）
- **AND** 提供临时的视觉反馈
